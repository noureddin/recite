<div dir="rtl">

# رسايت (نسخة الويب)

<div align="center">~~ <strong><a href="README.md">ReadMe in English</a></strong> ~~</div>
<p></p>

هذه نسخة الويب من  [رسايت الحاسوبي](https://github.com/noureddin/recite/tree/master)، ولكن للقرءان فقط، وبخصائص أكثر كثيرًا.

استخدمها على: [noureddin.github.io/recite](https://noureddin.github.io/recite).

---

## الخصائص

1. وضعان للتسميع:

    1. بالرسم العثماني (لا كتابة)،
    2. وبالرسم الإملائي (كتابة).

2. تلاوة صوتية اختياريًّا بعد إتمام تسميع كل آية، في كلا الوضعين. (يمكن اختياريا جعلها *قبل* كل آية، والذي يسمى «الوضع المعلم».)

3. الوضع الليلي، إضافةً إلى الوضع النهاري المبدئي.

4. إمكانية اختبار تسميع أي أيات متتالية بغض النظر عن سورها، فيمكن مثلا تسميع عدد من السور الكاملة، أو تسميع جزء كامل يبدأ في منتصف سورة وينتهي في منتصف سورة أخرى، وغير ذلك.

5. تلوين النص طبقا لأحكام التجويد (مثل مصحف دار المعرفة) في الوضع العثماني، ويمكن جعل النص بلا تلوين.

6. إمكانية استخدام لوحة المفاتيح وحدها، أو الفأرة وحدها، أو لوحة اللمس وحدها، أو حتى شاشة اللمس وحدها.

7. استخدام تصميم ويب مستجيب، فيتكيّف مع تقريبا أي جهاز، من شاشات التلفاز الكبيرة إلى الهواتف المحمولة الصغيرة. 

8. (للخارقين) مُعامِلات رابط «للضبط المسبق» للإعدادات وحتى لاختيار الآيات المراد تسميعها. (مفصل بالأسفل.)

9. (للمطورين) سَهولة تضمينه في تطبيقات ويب أخرى. (مفصل بالأسفل، تحت عنوان «مُعامِلات رابط أشد تقدما».)

### مُعامِلات الرابط (للمستخدمين المتقدمين)

> `https://noureddin.github.io/recite/?PARAMS`

أمثلة على `PARAMS`:

- `s=1`: السورة الأولى بكاملها.
- `s=2`: السورة الثانية بكاملها.
- `s=1-2`: السورتان الأولى والثانية.
- `s=-3`: السور الثلاثة الأولى (`1` اخياري هنا).
- <code dir="ltr">s=78-</code>: جميع السور من سورة النبأ (السورة ٧٨) حتى نهاية القرءان.
- `p=1`: الصفحة الأولى بكاملها (في مصحف المدينة).
- `p=2`: الصفحة الثانية بكاملها (في مصحف المدينة).
- `p=1-3`: الصفحات الثلاثة الأولى (في مصحف المدينة).
- `j=1`: الجزء الأول بكامله.
- `j=30`: الجزء الأخير بكامله.
- `r=1-4`: الأرباع الأربعة الأولى (في القرءان بكامله).
- `r=10//1`: الربع الأول في الجزء العاشر.
- `r=10//1-10//2`: أول ربعين في الجزء العاشر.
- `r=10//7-10//8`: آخر ربعين في الجزء العاشر.
- `h=1`: الحزب الأول بكامله (الحزب هو نصف جزء).
- `1/1-1/3`: من الآية الأولى من السورة الأولى حتى الآية الثالثة من السورة الأولى.
- `2/1-4/3`: من الآية الأولى من السورة الثانية حتى الآية الثالثة من السورة الرابعة.

يمكن مع جميع هذه المُعامِلات زيادة <code dir="ltr">a=</code> لإضافة آيات **بعد** المدى المحدد، أو <code dir="ltr">b=</code> لإضافة آيات **قبل** المدى المحدد، أو كليهما معا. أمثلة:

- `p=1-3&a=1`: الصفحات الثلاثة الأولى (في مصحف المدينة) والآية التي بعدها.
- `j=15&a=36`: الجزء الخامس عشر بكامله و٣٦ آية بعده.
- `j=2&b=5`: الجزء الثاني بكامله وخمس آيات قبله.
- `p=3&b=1&a=2`: الصفحة الثالثة وآية قبلها وآيتان بعدها.

مُعامِلات أخرى لضبط القيم المبدئية للخيارات:

- `d` أو `dark`:
اختيار الوضع الليلي.
- `l` أو `light`:
إلغاء اخيار الوضع الليلي (المبدئي؛ استخدمه فقط لإلغاء `d` سابق).

- <code dir="ltr">c=</code> أو <code dir="ltr">color=</code>:
اختيار نمط تلوين النص في الوضع العثماني؛ يقبل القيم التالية:

    1. `t` أو `taj` أو `tajweed`: طبقا لأحكام التجويد (المبدئي).
    2. `b` أو `bas` أو `basic`: تلوين أجزاء الرسم.
    3. `n` أو `no` أو `none`: بغير تلوين.

- <code dir="ltr">m=</code> أو <code dir="ltr">mv=</code> أو <code dir="ltr">mvbtns=</code>:
اختيار موضع أزرار التسميع في الوضع العثماني؛ يقبل القيم التالية:

    1. `b`: أسفل (المبدئي).
    2. `r`: يمين.
    3. `l`: يسار.

- <code dir="ltr">q=</code> أو <code dir="ltr">qz=</code> أو <code dir="ltr">quizmode=</code>:
اختيار وضع التسميع؛ يقبل القيم التالية:

    1. `u` أو `uthm` أو `uthmani`:
وضع التسميع العثماني اللاكتابي (المبدئي؛ استخدمه فقط لإلغاء `quizmode=imlaai` سابق).
    2. `i` أو `imla` أو `imlaai`:
وضع التسميع الإملائي الكتابي.

- `byword`:
تغيير معدل مراجعة الأخطاء في الوضع الإملائي إلى «كل&nbsp;كلمة»، بدلا من «كل&nbsp;حرف».
- `byletter`:
تغيير معدل مراجعة الأخطاء في الوضع الإملائي إلى «كل&nbsp;حرف»، بدلا من «كل&nbsp;كلمة» (المبدئي؛ استخدمه فقط لإلغاء `byword` سابق).

- `t` أو `teach` أو `teacher`:
تفعيل الوضع المعلم (تشغيل التلاوة الصوتية للآية **قبل** بدء تسميعها، وليس بعدها).
- `n` أو `noteach` أو `noteacher`:
تعطيل الوضع المعلم (المبدئي؛ تشغيل التلاوة الصوتية للآية **بعد** الانتهاء من تسميعها، وليس قبلها).

- <code dir="ltr">qari=</code>:
تحديد التلاوة الصوتية؛ أيّ قيمة غير مقبولة تعتبر «بغير تلاوة صوتية»، بما في ذلك عدم إعطاء قيمة. يحتوي [مِلف القراء](res/qaris) على عنوان كل تلاوة صوتية متبوعا باسمها العربي. القيم المقبولة لهذا المُعامِل هي العناوين (السطور التي كلها بالحروف الإنجليزية وبغير مسافات).

    **ملاحظة:** لا تسمح المتصفحات لأي صفحة بتشغيل صوتيات قبل أن يتفاعل معها المستخدم، إلا إذا أعطى المستخدم لهذا النطاق (الموقع) الإذن بتشغيل الصوتيات آليًّا. لذا، فإذا استخدمت هذه المُعامِلات لاختيار آيات وقارئ **وكذلك** تفعيل الوضع المعلم، فإنك لن تسمع الآية الأولى. اضغط في أي مكان على الصفحة ثم اضغط زر Escape (أو Esc) على لوحة المفاتيح لسماعها. أو أعطِ `noureddin.github.io` الإذن بتشغيل الصوتيات آليًّا.

    **معلومة:** ضغط <kbd>Escape</kbd> في أي وقت يُعيد تشغيل التلاوة الصوتية الحالية. والذي يفيد خصوصا في الوضع المعلم.

رجاءً لاحظ أن جميع هذه المُعامِلات تُغيّر فقط القيم المبدئية؛ ستبقى جميعها قابلة للتغيير من نافذة الخيارات.
(ولكن انظر «مُعامِلات رابط أشد تقدما» بالأسفل.)

<details>
<summary><b>مُعامِلات رابط أشد تقدما</b></summary>

<p></p>

لا يمكن تغيير هذه الخصائص من الواجهة، بل من مُعامِلات الرابط فقط، لأنها إما متقدمة جدا وإما خاصة باستخدام محدود جدا أو كلاهما، فلن تفيد الغالبية العظمى من المستخدمين.

- <code dir="ltr">qariurl=</code>:
لإعطاء رابط خادم تلاوتك الصوتية المفضلة، حتى لو خادم محلي (مثل `http://0.0.0.0:6236` ولكن **ليس**&nbsp;<code dir="ltr">file:///</code>). يجعل محدِّد التلاوة الصوتية فارغا. لكن اختيار تلاوة صوتية من الواجهة سيغطى على هذه الخاصية. يجب على الرابط المعطى أن يكون فيه صوتيات الآيات، فمثلا إضافة <code dir="ltr">/001001.mp3</code> إلى نهايته يجب أن تعطي صوت الآية الأولى من السورة الأولى.

- `dt` أو `disableteacher`: لإزالة إمكانية تغيير الوضع المعلم من الواجهة. سيبقى الوضع المعلم قابلا للتغيير من مُعامِلات الرابط. هذا مفيد لفرض قيمة معينة له (مثلا بلا معلم) في حالة تضمينه في تطبيق ويب مثلا.

    **تحذير:** ستبقى قيمته قابلةً للتغيير من شاشة كونسول جافاسكربت؛ لم أستطيع تعطيل هذا بعد.

- `dq` أو `disablequizmode`: لإزالة إمكانية تغيير وضع التسميع من الواجهة. سيبقى وضع التسميع قابلا للتغيير من مُعامِلات الرابط. هذا مفيد لفرض قيمة معينة له (مثلا الإملائي) في حالة تضمينه في تطبيق ويب مثلا.

    **تحذير:** ستبقى قيمته قابلةً للتغيير من شاشة كونسول جافاسكربت؛ لم أستطيع تعطيل هذا بعد.

- `zz`:
للعمل داخل تطبيق آخر والتكامل معه. صُنع في الأساس من أجل [ذِكر الذِكرِ](https://github.com/noureddin/zz)، ولكنه عام بما يكفي ليكون مفيدا للاستخدام في تطبيقات أخرى.

    سيفعل ما يلي عند تفعيله:

    - عند البدء، سيضع زر «تجاهل» بدلا من زر «جديد» (إضافةً إلى زر «إعادة»).
    - عند البدء، سيُعلم التطبيق الأب بعنوان التسميع، حتى يتسنى له تحديث عنوان نافذته.
    - عند الانتهاء، سيُظهر زريْ «تجاهل» و«إعادة» بدلا من المحدِّدات الخاصة باختيار آيات جديدة.
    - عند الانتهاء، سيظهر زر «عودة» تحت رسالة النهاية.
    - عندما يغيّر المستخدم أي خيار، فإن التطبيق الأب سيعلم في الحال.

    لاستخدام هذا الوضع، عليك تشغيل رسايت في إطار ضمني (`iframe`) باستخدام مُعامِل الرابط `zz`، وعليك تعريف هذه الدوال في مساحة الأسماء العامة في تطبيقك (أيْ تحت كائن `window`):

    - <code dir="ltr">zz_show()</code>:
    تُنادى بعد التحميل الأساسي، حتى يُظهر التطبيق الأب إطار رسايت.
    - <code dir="ltr">zz_done()</code>:
    تُنادى عند ضغط «عودة»، بعد الانتهاء من التسميع.
    - <code dir="ltr">zz_ignore()</code>:
    تُنادى عند ضغط «تجاهل»، الذي قد يكون في أي وقت.

        على عكس <code dir="ltr">zz_done()</code> (زر «عودة»)، فإن <code dir="ltr">zz_ignore()</code> تعني أن المستخدم لا يريد الاعتبار بهذا التسميع.
        فمثلا إذا كنت تسأل المستخدم عن مدى حفظه للآيات المحددة، فلا تفعل ذلك إذا نوديت <code dir="ltr">zz_ignore()</code> بدلا من <code dir="ltr">zz_done()</code>.

    - <code dir="ltr">zz_set_title(title)</code>:
    تُنادى عند البدء لضبط عنوان نافذة الأب إلى عنوان التسميع الحالي، المطابق لعنوان نافذة رسايت دون <code>|&nbsp;رسايت</code> وللعنوان الظاهر فوق الأزرار العلوية.
    - <code dir="ltr">zz_set_quizmode(uthm_or_imla)</code>:
    تُنادى عندما يغيّر المستخدم وضع التسميع. إما `"uthm"` للوضع العثماني (المبدئي) وإما `"imla"` للوضع الإملائي.
    - <code dir="ltr">zz_set_feedbackrate(emptystring_or_word)</code>:
    تُنادى عندما يغيّر المستخدم معدل مراجعة الأخطاء في الوضع الإملائي. النص الفارغ (`""`) لكل حرف (المبدئي) و&nbsp;`"word"` لكل كلمة.
    - <code dir="ltr">zz_set_tajweed(t_or_b_or_n)</code>:
    تُنادى عندما يغيّر المستخدم تلوين النص في الوضع العثماني. `"t"` للتجويد (المبدئي) و&nbsp;`"b"` للبسيط (أجزاء الرسم) و&nbsp;`"n"` لنفي التلوين.
    - <code dir="ltr">zz_set_dark(boolean)</code>:
    تُنادى عندما يغيّر المستخدم محدِّد الوضع الليلي. إما `true` للوضع الليلي وإما `false` للوضع النهاري (المبدئي).
    - <code dir="ltr">zz_set_mvbtns(b_or_r_or_l)</code>:
    تُنادى عندما يغيّر المستخدم موضع أزرار التسميع في الوضع العثماني. `"b"` للأسفل (المبدئي) و&nbsp;`"r"` لليمين و&nbsp;`"l"`.

    في الغالب ستشغل رسايت بمدى معين من الآيات لبدء التسميع لحظيًّا.

    يمكنك الإطلاع على [دوال <code dir="ltr">zz_*</code>  الخاصة بذِكر الذِكر في ملف `zz.py`](https://github.com/noureddin/zz/blob/gh-pages/zz.py#L757-L813).

</details>

---

جزى اللهُ خيرا الأستاذ [خالد حسني](https://github.com/khaledhosny/) لعمله على مشروع [Quran Data](https://github.com/aliftype/quran-data) ومشروع [الخط الأميري](https://www.amirifont.org/).

جزى الله خيرا القائمين على مشروع [Verse By Verse MP3 Quran](http://www.versebyversequran.com/)
لتوفيرهم التلاوات الصوتية للمشاريع التي تحتاجها،
مثل تطبيق رسايت للويب و[برنامج آيات](https://quran.ksu.edu.sa/).

جزى الله خيرًا صديقيّ [عز الدين](https://github.com/EzzEddin) و[أحمد حسن](https://github.com/ahmad-h-yassin) لمساعدتي في تطوير هذه التطبيقات وإمدادي بمعلومات وتعليقات قيمة.
